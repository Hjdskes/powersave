This is a powersave script for Linux. It's heavily based on Taylorchu's Powerdown (also found on Github), but I have adapted it to match my own setup. That means that this script will NOT work on any setup so please CHECK this before running it on your computer! Things might break otherwise and I will NOT be responsible for any damage that has been done. This script gives me roughly 1:30/2:00 hours of battery life, on a battery that would otherwise last ~45 minutes. (yea, I know, my battery is fried)

The script will need the following dependencies to run:
1. hdparm
2. wireless_tools
3. upower
Also, if you're using a standalone WM, you will have to start the upower daemon yourself. You can do this by adding the following to your ~/.xinitrc:
upower -e &

This script has to be placed in /etc/pm/power.d/ and when done so, it will automatically kick in the powersave settings when you're on battery and restore the defaults when you're not. I have placed all the available powersave options in the script, except for:
- HAL CD polling; HAL is deprecated software and as such, I don't use it. I have not found another way to disable CD polling yet, but perhaps this is not even necessary anymore?

Things you should edit, should you use this on your setup:
- NMI watchdog; I have this disabled at kernel level. If you don't, then uncomment the line in the powersave script. This option is safe to do! Should you want to disable this at kernel level too, use: nmi_watchdog=0
- ASPM powersave; this option is safe! To be able to write to this file you have to use a kernel parameter at boot: pcie_aspm=force
- Disk powersave; as I have only one HDD (laptop), I have edited the wildcard that Taylorchu originally uses. If you have multiple HDD's and want run powersave on all of them, then use this:
for dev in $(awk '/^\/dev\/sd/ {print $1}' /etc/mtab); do hdparm -S 6 -B 254 -a 2048 $dev; done
Also, note that I use -B254. I hate the clicking noises my HDD would make otherwise, but this is not power-efficient. If you want maximum powersave, use -B1.
THIS CAN HURT YOUR HARDDRIVE, SO BE CAREFUL.
- Screen powersave; this option is safe! The numbers of brightness differ per manufacturer. You should check yours. Do so by setting your screen on maximum brightness and then running: cat/sys/class/backlight/acpi_video*/brightness
Then, lookup the false) part in the script and change the value. Mine is set to 9.
